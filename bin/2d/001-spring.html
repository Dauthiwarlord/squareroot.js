<!DOCTYPE html>
<html>
<head>
    <title>Spring motion | v0.1</title>

    <style type="text/css">

        body {
            background-color: #000000;
        }

        #cnv {
            position: absolute;
            top: 0px;
            left: 0px;
            background-color: #000000;
        }

        #instr {
            position: absolute;
            top: 10px;
            left: 10px;
            font-family: Georgia, sans-serif;
            color: #ffffff;
            font-size: 14px;
        }

    </style>

<script type="text/javascript" src="../../lib/requestAnimFrame.js"></script>

<!-- SQRLIB -->
<!-- Auto-generated by tools/demojstags.py. Do not edit this section -->
<script type="text/javascript" src="../../build/squareroot-min.js"></script>
<!-- SQRLIB -->

    <script type="text/javascript">

        var ctx, sp;

        SpringBall = function() {

            var spring = new SQR.Spring();
            spring.friction = 0.8;
            spring.k = 0.9;

            this.draw = function(ctx) {

                spring.update();

                ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

                ctx.strokeStyle = 'rgb(255,255,255)';
                ctx.fillStyle = 'rgb(255,255,255)';

                ctx.beginPath();
                ctx.moveTo(spring.anchor.x, spring.anchor.y);
                ctx.lineTo(spring.location.x, spring.location.y);
                ctx.stroke();

                ctx.beginPath();
                ctx.arc(spring.location.x, spring.location.y, 10, 0, Math.PI * 2);
                ctx.stroke();

            }

            this.moveAnchor = function(x, y) {
                spring.anchor.x = x;
                spring.anchor.y = y;
            }

        }

        window.onload = function() {

            var cnv = document.getElementById('cnv');

            ctx = cnv.getContext('2d');

            cnv.width = window.innerWidth;
            cnv.height = window.innerHeight;

            sp = new SpringBall();

            document.addEventListener('click', onClick, false);
            draw();

            sp.moveAnchor(window.innerWidth * 0.5, window.innerHeight * 0.5);

        }

        function onClick(e) {
            sp.moveAnchor(e.pageX, e.pageY);
        }

        function draw() {
            requestAnimFrame(draw);
            sp.draw(ctx);
        }

    </script>

</head>
<body>
<div id="container">
    <canvas id="cnv"></canvas>
</div>

<div id="instr">Click anywhere to activate the spring animation</div>

</body>
</html>

















