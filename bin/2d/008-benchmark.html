<!DOCTYPE html>
<html>
<head>
    <title> | v0.1</title>

<!-- SQRLIB -->
<!-- Auto-generated by tools/demojstags.py. Do not edit this section -->
<script type="text/javascript" src="../../build/squareroot-min.js"></script>
<!-- SQRLIB -->

    <script type="text/javascript" src="../js/Circle.js"></script>
    <script type="text/javascript" src="../../lib/Stats.js"></script>
    <script type="text/javascript" src="../../lib/TweenMax.js"></script>

    <style type="text/css">

        body {
            overflow: hidden;
        }

        #cnv {
            background-color: #000000;
            position: absolute;
            top: 0px;
            left: 0px;
        }

    </style>

    <script type="text/javascript">

        var useTweenMax = false;

        var cnv, ctx;
        var cw, ch, circles = [];
        var radius = 5, padding = 4;

        var stats;

        window.onload = function() {

            stats = new Stats();
            stats.setMode(0);
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.left = '0px';
            stats.domElement.style.top = '0px';
            document.body.appendChild(stats.domElement);


            cnv = document.getElementById('cnv');
            cnv.width = window.innerWidth;
            cnv.height = window.innerHeight;

            ctx = cnv.getContext('2d');

            cw = ((window.innerWidth / (radius * 2 + padding)) | 0);
            ch = ((window.innerHeight / (radius * 2 + padding)) | 0);

            for (var x = 0; x < cw; x++) {
                for (var y = 0; y < ch; y++) {
                    var c = new Circle();
                    c.radius = radius;
                    c.color = new SQR.Color(0, 100, 15);
                    c.center.x = x * radius * 2 + radius + (x + 1) * padding;
                    c.center.y = y * radius * 2 + radius + (y + 1) * padding;

                    if (!useTweenMax) {
                        c.speed = .05 + Math.random() * .1;
                        c.phase = Math.PI * Math.random();
                        c.maxRadius = radius;
                    } else {
                        TweenMax.to(c, .5 + Math.random() * 1, { radius: radius * 0.2, yoyo: true, repeat: -1, delay: Math.random() });
                    }

                    circles.push(c);
                }
            }

            draw();
        }

        function draw() {

            stats.begin();

            requestAnimFrame(draw);

            ctx.clearRect(0, 0, cnv.width, cnv.height);

            var numc = circles.length;

            for (var i = 0; i < numc; i++) {

                var c = circles[i];

                if (!useTweenMax) {
                    c.phase += c.speed;
                    c.radius = c.maxRadius * 0.6 + c.maxRadius * 0.4 * Math.sin(c.phase);
                }

                c.draw(ctx);
            }

            stats.end();
        }

    </script>

</head>
<body>

<canvas id="cnv"></canvas>

</body>
</html>