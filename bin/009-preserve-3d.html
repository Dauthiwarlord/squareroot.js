<!DOCTYPE html>
<html>
<head>
    <title>Preserve 3D example | v0.15</title>

<!-- SQRLIB -->
<!-- Auto-generated by tools/demojstags.py. Do not edit this section -->
<script type="text/javascript" src="../build/squareroot-min.js"></script>
<!-- SQRLIB -->

    <style type="text/css">

        body {
            overflow: hidden;
            background-color: #000000;
        }

        #canvas {
            position: absolute;
            top: 0px;
            left: 0px;
        }

        #div-container {
            position: absolute;
            top: 50%;
            left: 50%;
        }

        #div-container img {
            display: block;
            position: absolute;
        }

        #instr {
            position: absolute;
            top: 10px;
            left: 10px;
            font-family: Georgia, sans-serif;
            color: #ffffff;
            font-size: 14px;
        }

    </style>

    <script type="text/javascript">

        var container, engine, camera, divp, divc;

        function createDiv(imageUrl, size) {
            var ht = document.createElement('div');

            ht.style.position = 'absolute';
            ht.style['-webkit-transform-style'] = 'preserve-3d';


            var hti = new Image();
            hti.src = imageUrl;
            hti.style.marginTop = (size / -2) + 'px';
            hti.style.marginLeft = (size / -2) + 'px';
            hti.style.width = size + 'px';
            hti.style.height = size + 'px';

            ht.appendChild(hti);

            return ht
        }

        window.onload = function() {
            // Uncomment this line if on IE 10 and preserve-3d doesn't work
//            SQR.usePreserve3d = false;

            container = document.getElementById("div-container");

            // Parameters are: canvas, container
            engine = new SQR.Squareroot(null, container);
            engine.setBackground("#000000");
            engine.setSize(window.innerWidth, window.innerHeight);
            engine.setProjection(30);

            camera = new SQR.Transform();
            camera.position.z = engine.cssDistance();
            engine.add(camera);

            divp = new SQR.Transform('divp');
            divp.renderer = new SQR.DOMElement3D(createDiv("assets/square-400.jpg", 400));
            divp.renderer.setBackfaceVisibility(true);
            engine.add(divp);

            divc = new SQR.Transform('divc');
            divc.renderer = new SQR.DOMElement3D(createDiv("assets/fruits-100.jpg", 100));
//            divc.renderer = new SQR.DOMElement3D(createDiv("assets/fruits-100.jpg", 100), container);
            divc.renderer.setBackfaceVisibility(true);

            divc.position.z = 20;
            divc.position.x = -100;
            divp.add(divc);

            render();
        }

        var a = 1;

        function render() {
            requestAnimFrame(render);

            divp.rotation.y = a;
            a += 0.03;

            engine.render(camera);
        }

    </script>

</head>
<body>
<div id="canvas-container">
    <canvas id="canvas"></canvas>
</div>
<div id="div-container"></div>

<div id="instr">Test to see if 2D and 3D CSS rendering match</div>

</body>
</html>