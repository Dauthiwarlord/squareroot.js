<!DOCTYPE html>
<html>
<head>
<title>Hexagon Menu | v0.10</title>

<!-- SQRLIB -->
<!-- Auto-generated by tools/demojstags.py. Do not edit this section -->
<script type="text/javascript" src="../../build/squareroot-min.js"></script>
<!-- SQRLIB -->

<style type="text/css">

    body {
        overflow: hidden;
        background-color: #000;
    }

    #div-container {
        position: absolute;
        top: 50%;
        left: 50%;
    }

    #div-container div {
        position: absolute;
        top: 0px;
        left: 0px;

        text-align: center;
        font-family: Arial;
        color: white;
        font-size: 6em;
        line-height: 6em;
    }

</style>

<script type="text/javascript">

    var container, engine, camera, root;

    var numHex = 0

    function createHexagon(light, radius) {
        var hex = document.createElement('div');

        var c = radius | 0;

        radius = radius - 10;

        hex.style.backgroundColor = "rgba("+c+","+c+","+c+",1)";
        hex.style.zIndex = "1";
        hex.style.width = (radius * 2) + "px";
        hex.style.height = (radius * 2) + "px";
        hex.style.marginTop = (radius * -1) + "px";
        hex.style.marginLeft = (radius * -1) + "px";
        hex.style.borderRadius = (radius) + "px";
        numHex++;
        return hex;
    }

    var addHexagon = function(root, x, y, z, r) {
        var v = new SQR.V3(x, y, z).norm().mul(r * 16 / SQR.twoPI)
        var ht = createHexagon(Math.random(), r);

        var t = new SQR.Transform();
        t.position.set(v.x, v.y, v.z);
        t.lookInDirection(v.neg());
        t.renderer = new SQR.DOMElement3D(ht);
        // t.renderer.setBackfaceVisibility();
        root.add(t);

        return t;
    }

    var createBall = function(r) {
        var segmentsY = 4;

        var phiStart = 0;
        var phiLength = SQR.twoPI;
        var thetaStart = 0;
        var thetaLength = Math.PI;
        var x, y;

        for (y = 0; y <= segmentsY; y ++) {

            var segmentsX;
            var phiStart = 0;

            switch(y) {
                case 0:
                case segmentsY:
                    segmentsX = 1;
                break;
                case 1:
                case segmentsY-1:
                    segmentsX = 4;
                break;
                default:
                    segmentsX = 8;
                break;
            }

            for (x = 0; x < segmentsX; x ++) {

                var u = x / segmentsX;
                var v = y / segmentsY;

                var xp = -Math.cos(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);
                var yp = Math.cos(thetaStart + v * thetaLength);
                var zp = Math.sin(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);

                addHexagon(root, xp, yp, zp, r);
            }
        }
    }

    window.onload = function() {

        document.addEventListener('touchmove', function(e) {
            e.preventDefault();
        }, false);

        container = document.getElementById("div-container");

        engine = new SQR.Squareroot(null, container);
        engine.setSize(window.innerWidth, window.innerHeight);
        engine.setProjection(50);
        
        camera = new SQR.Transform();
        camera.position.z = 1200;
        engine.add(camera);

        root = new SQR.Transform();
        engine.add(root);

        createBall(110);
        createBall(120);
        createBall(130);
        createBall(140);
        // createBall(150);
        // createBall(160);

        console.log(numHex);

        render();
    }

    function render() {
        requestAnimFrame(render);

        root.rotation.y += 0.01;
        root.rotation.x += 0.005;

        engine.render(camera);
    }

</script>

</head>
<body>
<div id="div-container"></div>
</body>
</html>