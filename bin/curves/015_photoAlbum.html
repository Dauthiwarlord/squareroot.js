<!DOCTYPE html>
<html>
<head>
    <title>015 Photo album concept | v0.1</title>

    <link rel="stylesheet" href="curves.css">

    <style type="text/css">

        #frame {
        }

        #desc {
            position: absolute;
        }

        #cnv {
            position: absolute;
            top: 0;
            left: 0;
        }

        #container {
            position: absolute;
            top: 50%;
            left: 50%;
        }

        .plane {
            position: absolute;
            margin-top: -200px;
            margin-left: -200px;
            width: 400px;
            height: 400px;
            overflow: hidden;
            background: red;
        }

        .plane img {
            position: absolute;
            width: 400px;
            height: 400px;
        }

        .plane div {
            position: absolute;
            width: 400px;
            height: 400px;
            background: #000000;
        }

    </style>

    <script type="text/javascript" src="../../lib/requestAnimFrame.js"></script>

    <script type="text/javascript" src="../js/Photo.js"></script>
    <script type="text/javascript" src="../js/PhotoPath.js"></script>

<!-- SQRLIB -->
<!-- Auto-generated by tools/demojstags.py. Do not edit this section -->
<script type="text/javascript" src="../../lib/requestAnimFrame.js"></script>
<script type="text/javascript" src="../../src/SQR.js"></script>
<script type="text/javascript" src="../../src/color/Color.js"></script>
<script type="text/javascript" src="../../src/math/Interpolation.js"></script>
<script type="text/javascript" src="../../src/math/Mathx.js"></script>
<script type="text/javascript" src="../../src/math/Matrix2D.js"></script>
<script type="text/javascript" src="../../src/math/Matrix33.js"></script>
<script type="text/javascript" src="../../src/math/Matrix44.js"></script>
<script type="text/javascript" src="../../src/math/Noise.js"></script>
<script type="text/javascript" src="../../src/math/PerlinNoise.js"></script>
<script type="text/javascript" src="../../src/math/ProjectionMatrix.js"></script>
<script type="text/javascript" src="../../src/math/QuadraticBezier.js"></script>
<script type="text/javascript" src="../../src/math/Quaternion.js"></script>
<script type="text/javascript" src="../../src/math/Spline.js"></script>
<script type="text/javascript" src="../../src/math/Spring.js"></script>
<script type="text/javascript" src="../../src/math/Vector2.js"></script>
<script type="text/javascript" src="../../src/math/Vector3.js"></script>
<script type="text/javascript" src="../../src/math/VectorUtil.js"></script>
<script type="text/javascript" src="../../src/sqr/Geometry.js"></script>
<script type="text/javascript" src="../../src/sqr/Squareroot.js"></script>
<script type="text/javascript" src="../../src/sqr/Transform.js"></script>
<script type="text/javascript" src="../../src/sqr/objects/Particle2D.js"></script>
<script type="text/javascript" src="../../src/sqr/objects/Plane.js"></script>
<script type="text/javascript" src="../../src/sqr/objects/Quad.js"></script>
<script type="text/javascript" src="../../src/sqr/objects/Triangle.js"></script>
<script type="text/javascript" src="../../src/sqr/physics/CSSCollider.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/DOMElement2D.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/DOMElement3D.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/Particle.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/Polygon.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/Segment.js"></script>
<script type="text/javascript" src="../../src/sqr/util/CanvasUtil.js"></script>
<script type="text/javascript" src="../../src/sqr/util/DOMUtil.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Interactor.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Stringify.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Time.js"></script>
<!-- SQRLIB -->

    <script type="text/javascript">

        var engine, camera, curves;
        var progress = 0;

        var photos = [];

        var scrollPos = 0;
        var scrollTarget = 0;

        var pictureTime = 0.5;

        var minZ = -400;
        var rangeZ = -400;
        var minY = 800;
        var rangeY = 100;

        PhotoPath.EDGE = 3000;

        function addPhoto(src, s) {
            var f = 0.2 + Math.random() * 0.2;

            var sing = (Math.random() > 0.5) ? 1 : -1;
            var cy = Math.random() * 100 * sing;

            var y = (minY + Math.random() * rangeY) * sing;
            var z = minZ + Math.random() * rangeZ;

            var c = new PhotoPath(f, cy, y, z, y, z);

            var p = new Photo(src, c, s, s + pictureTime);
            engine.add(p.transform);
            photos.push(p);
        }

        window.onload = function() {

            var canvas = document.getElementById('cnv');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            engine = new SQR.Squareroot(canvas, container);
            engine.setProjection(30);
            engine.setClearColor('black');

            curves = new SQR.Transform();

            addPhoto("../assets/fruits-400.jpg", 0.00);
            addPhoto("../assets/square-400.jpg", 0.05);
            addPhoto("../assets/fruits-400.jpg", 0.10);
            addPhoto("../assets/square-400.jpg", 0.15);
            addPhoto("../assets/fruits-400.jpg", 0.20);
            addPhoto("../assets/square-400.jpg", 0.25);
            addPhoto("../assets/fruits-400.jpg", 0.30);
            addPhoto("../assets/square-400.jpg", 0.35);
            addPhoto("../assets/fruits-400.jpg", 0.40);
            addPhoto("../assets/square-400.jpg", 0.45);
            addPhoto("../assets/fruits-400.jpg", 0.50);

            camera = new SQR.Transform();
            camera.position.z = engine.cssDistance();

            engine.add(camera, curves);

            document.addEventListener('mousewheel', function(e) {
                scrollTarget += e.wheelDeltaY / window.innerHeight * -0.03;
            }, false);

            render();
        }

        function render() {
            requestAnimFrame(render);

            scrollPos += (scrollTarget - scrollPos) * 0.1;

            for(var i = 0; i < photos.length; i++) {
                photos[i].updatePosition(scrollPos);
            }

            engine.render(camera);
        }

    </script>

</head>
<body>

<canvas id="cnv" width="100%" height="100%"></canvas>

<div id="frame">
    <div id="container"></div>
</div>

<div id="desc">
    <h1>015 Photo album concept</h1>

    <p>Scrollable photo album concept. Bezier curves + CSS 3D</p>
</div>

</body>
</html>